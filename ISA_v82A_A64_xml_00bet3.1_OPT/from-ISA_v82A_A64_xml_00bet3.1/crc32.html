<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type"/><link href="insn.css" rel="stylesheet" type="text/css"/><meta content="iform.xsl" name="generator"/><title>CRC32B, CRC32H, CRC32W, CRC32X -- A64</title></head><body><div align="center" class="htmldiff_header"><table><tbody><tr><td class="old"><a href="../../ISA_v82A_A64_xml_00bet3.1/xhtml/crc32.html">ISA_v82A_A64_xml_00bet3.1 (old)</a></td><td class="explain">htmldiff from-ISA_v82A_A64_xml_00bet3.1</td><td class="new"><a href="../xhtml/crc32.html">(new) ISA_v82A_A64_xml_00bet3.1_OPT</a></td></tr></tbody></table></div><table align="center"><tr><td><div class="topbar"><a href="index.html">Base Instructions</a></div></td><td><div class="topbar"><a href="fpsimdindex.html">SIMD&amp;FP Instructions</a></div></td><td><div class="topbar"><a href="encodingindex.html">Index by Encoding</a></div></td><td><div class="topbar"><a href="permindex.html">Permuted Index</a></div></td><td><div class="topbar"><a href="shared_pseudocode.html">Shared Pseudocode</a></div></td><td><div class="topbar"><a href="notice.html">Proprietary Notice</a></div></td></tr></table><hr/><h2 class="instruction-section">CRC32B, CRC32H, CRC32W, CRC32X</h2><p id="desc"><p class="aml"><span class="asm-code">CRC32</span> checksum performs a cyclic redundancy check (CRC) calculation on a value held in a general-purpose register. It takes an input CRC value in the first source operand, performs a CRC on the input value in the second source operand, and returns the output CRC value. The second source operand can be 8, 16, 32, or 64 bits. To align with common usage, the bit order of the values is reversed as part of the operation, and the polynomial 0x04C11DB7 is used for the CRC calculation.</p><p class="aml">In ARMv8-A, this is an <span class="arm-defined-word">optional</span> instruction, and in ARMv8.1 it is mandatory for all implementations to implement it.</p><p class="aml"><a class="armarm-xref" title="Reference to ARM ARM section">ID_AA64ISAR0_EL1</a>.CRC32 indicates whether this instruction is supported.</p></p><p class="desc"></p><div class="regdiagram-32"><table class="regdiagram"><thead><tr><td>31</td><td>30</td><td>29</td><td>28</td><td>27</td><td>26</td><td>25</td><td>24</td><td>23</td><td>22</td><td>21</td><td>20</td><td>19</td><td>18</td><td>17</td><td>16</td><td>15</td><td>14</td><td>13</td><td>12</td><td>11</td><td>10</td><td>9</td><td>8</td><td>7</td><td>6</td><td>5</td><td>4</td><td>3</td><td>2</td><td>1</td><td>0</td></tr></thead><tbody><tr class="firstrow"><td class="lr">sf</td><td class="lr">0</td><td class="lr">0</td><td class="l">1</td><td>1</td><td>0</td><td>1</td><td>0</td><td>1</td><td>1</td><td class="r">0</td><td class="lr" colspan="5">Rm</td><td class="l">0</td><td>1</td><td class="r">0</td><td class="lr">0</td><td class="lr" colspan="2">sz</td><td class="lr" colspan="5">Rn</td><td class="lr" colspan="5">Rd</td></tr><tr class="secondrow"><td></td><td></td><td></td><td colspan="8"></td><td colspan="5"></td><td colspan="3"></td><td class="droppedname">C</td><td colspan="2"></td><td colspan="5"></td><td colspan="5"></td></tr></tbody></table></div><div class="encoding"><h4 class="encoding">CRC32B<span class="bitdiff"> (sf == 0 &amp;&amp; sz == 00)</span></h4><p class="asm-code"><a id="CRC32B_32C_dp_2src" name="CRC32B_32C_dp_2src">CRC32B  <a href="#wd" title="32-bit general-purpose accumulator output register (field &quot;Rd&quot;)">&lt;Wd></a>, <a href="#wn" title="32-bit general-purpose accumulator input register (field &quot;Rn&quot;)">&lt;Wn></a>, <a href="#wm" title="32-bit general-purpose data source register (field &quot;Rm&quot;)">&lt;Wm></a></a></p></div><div class="encoding"><h4 class="encoding">CRC32H<span class="bitdiff"> (sf == 0 &amp;&amp; sz == 01)</span></h4><p class="asm-code"><a id="CRC32H_32C_dp_2src" name="CRC32H_32C_dp_2src">CRC32H  <a href="#wd" title="32-bit general-purpose accumulator output register (field &quot;Rd&quot;)">&lt;Wd></a>, <a href="#wn" title="32-bit general-purpose accumulator input register (field &quot;Rn&quot;)">&lt;Wn></a>, <a href="#wm" title="32-bit general-purpose data source register (field &quot;Rm&quot;)">&lt;Wm></a></a></p></div><div class="encoding"><h4 class="encoding">CRC32W<span class="bitdiff"> (sf == 0 &amp;&amp; sz == 10)</span></h4><p class="asm-code"><a id="CRC32W_32C_dp_2src" name="CRC32W_32C_dp_2src">CRC32W  <a href="#wd" title="32-bit general-purpose accumulator output register (field &quot;Rd&quot;)">&lt;Wd></a>, <a href="#wn" title="32-bit general-purpose accumulator input register (field &quot;Rn&quot;)">&lt;Wn></a>, <a href="#wm" title="32-bit general-purpose data source register (field &quot;Rm&quot;)">&lt;Wm></a></a></p></div><div class="encoding"><h4 class="encoding">CRC32X<span class="bitdiff"> (sf == 1 &amp;&amp; sz == 11)</span></h4><p class="asm-code"><a id="CRC32X_64C_dp_2src" name="CRC32X_64C_dp_2src">CRC32X  <a href="#wd" title="32-bit general-purpose accumulator output register (field &quot;Rd&quot;)">&lt;Wd></a>, <a href="#wn" title="32-bit general-purpose accumulator input register (field &quot;Rn&quot;)">&lt;Wn></a>, <a href="#xm" title="64-bit general-purpose data source register (field &quot;Rm&quot;)">&lt;Xm></a></a></p></div><p class="pseudocode">integer d = <a href="shared_pseudocode.html#impl-shared.UInt.1" title="function: integer UInt(bits(N) x)">UInt</a>(Rd);
integer n = <a href="shared_pseudocode.html#impl-shared.UInt.1" title="function: integer UInt(bits(N) x)">UInt</a>(Rn);
integer m = <a href="shared_pseudocode.html#impl-shared.UInt.1" title="function: integer UInt(bits(N) x)">UInt</a>(Rm);
if sf == '1' &amp;&amp; sz != '11' then <a href="shared_pseudocode.html#impl-shared.UnallocatedEncoding.0" title="function: UnallocatedEncoding()">UnallocatedEncoding</a>();
if sf == '0' &amp;&amp; sz == '11' then <a href="shared_pseudocode.html#impl-shared.UnallocatedEncoding.0" title="function: UnallocatedEncoding()">UnallocatedEncoding</a>();
integer size = 8 &lt;&lt; <a href="shared_pseudocode.html#impl-shared.UInt.1" title="function: integer UInt(bits(N) x)">UInt</a><ins>(sz);</ins><del>(sz);   // 2-bit size field -> 8, 16, 32, 64
boolean crc32c = (C == '1');</del></p><p class="encoding-notes"></p><h3 class="explanations">Assembler Symbols</h3><div class="explanations"><table><col class="asyn-l"/><col class="asyn-r"/><tr><td>&lt;Wd></td><td><a id="wd" name="wd"><p class="aml">Is the 32-bit name of the general-purpose accumulator output register, encoded in the "Rd" field.</p></a></td></tr></table><table><col class="asyn-l"/><col class="asyn-r"/><tr><td>&lt;Wn></td><td><a id="wn" name="wn"><p class="aml">Is the 32-bit name of the general-purpose accumulator input register, encoded in the "Rn" field.</p></a></td></tr></table><table><col class="asyn-l"/><col class="asyn-r"/><tr><td>&lt;Xm></td><td><a id="xm" name="xm"><p class="aml">Is the 64-bit name of the general-purpose data source register, encoded in the "Rm" field.</p></a></td></tr></table><table><col class="asyn-l"/><col class="asyn-r"/><tr><td>&lt;Wm></td><td><a id="wm" name="wm"><p class="aml">Is the 32-bit name of the general-purpose data source register, encoded in the "Rm" field.</p></a></td></tr></table></div><p class="syntax-notes"></p><div class="ps" psname="commonps"><a id="commonps" name="commonps"></a><h3 class="pseudocode">Operation</h3><p class="pseudocode">if !<a href="shared_pseudocode.html#impl-shared.HaveCRCExt.0" title="function: boolean HaveCRCExt()">HaveCRCExt</a>() then
    <a href="shared_pseudocode.html#impl-shared.UnallocatedEncoding.0" title="function: UnallocatedEncoding()">UnallocatedEncoding</a>();

bits(32) acc = <a href="shared_pseudocode.html#impl-aarch64.X.read.1" title="accessor: bits(width) X[integer n]">X</a>[n];    // accumulator
bits(size) val = <a href="shared_pseudocode.html#impl-aarch64.X.read.1" title="accessor: bits(width) X[integer n]">X</a><ins>[m];    // input value
bits(32) poly = 0x04C11DB7&lt;31:0>;
</ins><del>[m];   // input value
bits(32)      poly    = (if crc32c then 0x1EDC6F41 else 0x04C11DB7)&lt;31:0>;
</del>
bits(32+size) tempacc = <a href="shared_pseudocode.html#impl-shared.BitReverse.1" title="function: bits(N) BitReverse(bits(N) data)">BitReverse</a><ins>(acc):</ins><del>(acc) :</del><a href="shared_pseudocode.html#impl-shared.Zeros.1" title="function: bits(N) Zeros(integer N)">Zeros</a>(size);
bits(size+32) tempval = <a href="shared_pseudocode.html#impl-shared.BitReverse.1" title="function: bits(N) BitReverse(bits(N) data)">BitReverse</a><ins>(val):</ins><del>(val) :</del><a href="shared_pseudocode.html#impl-shared.Zeros.1" title="function: bits(N) Zeros(integer N)">Zeros</a>(32);

// Poly32Mod2 on a bitstring does a polynomial Modulus over {0,1} operation
<a href="shared_pseudocode.html#impl-aarch64.X.write.1" title="accessor: X[integer n] = bits(width) value">X</a>[d] = <a href="shared_pseudocode.html#impl-shared.BitReverse.1" title="function: bits(N) BitReverse(bits(N) data)">BitReverse</a>(<a href="shared_pseudocode.html#impl-shared.Poly32Mod2.2" title="function: bits(32) Poly32Mod2(bits(N) data, bits(32) poly)">Poly32Mod2</a>(tempacc EOR tempval, poly));</p></div><hr/><table align="center"><tr><td><div class="topbar"><a href="index.html">Base Instructions</a></div></td><td><div class="topbar"><a href="fpsimdindex.html">SIMD&amp;FP Instructions</a></div></td><td><div class="topbar"><a href="encodingindex.html">Index by Encoding</a></div></td><td><div class="topbar"><a href="permindex.html">Permuted Index</a></div></td><td><div class="topbar"><a href="shared_pseudocode.html">Shared Pseudocode</a></div></td><td><div class="topbar"><a href="notice.html">Proprietary Notice</a></div></td></tr></table><p class="versions">
      Internal version only: isa v25.07, AdvSIMD v23.0, pseudocode v31.3
    </p><p class="copyconf">
      Copyright © 2010-2017 ARM Limited or its affiliates. All rights reserved.
      This document is Confidential.
    </p><div align="center" class="htmldiff_header"><table><tbody><tr><td class="old"><a href="../../ISA_v82A_A64_xml_00bet3.1/xhtml/crc32.html">ISA_v82A_A64_xml_00bet3.1 (old)</a></td><td class="explain">htmldiff from-ISA_v82A_A64_xml_00bet3.1</td><td class="new"><a href="../xhtml/crc32.html">(new) ISA_v82A_A64_xml_00bet3.1_OPT</a></td></tr></tbody></table></div></body></html>